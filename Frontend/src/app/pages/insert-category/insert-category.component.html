<div class="d-flex justify-content-center">
<div class="col-md-6">
  <h1 *ngIf="!this.edit" class="mobile-heading text-center">Neue Kategorie</h1>
  <h1 *ngIf="this.edit" class="mobile-heading text-center">Kategorie bearbeiten</h1>
  <form [formGroup]="insertCategoryForm" novalidate class="form">

    <input type="hidden" formControlName="CAID" name="CAID">
    <input type="hidden" formControlName="userID" name="userID">

    <div class="form-group mt-3">
      <label for="category_name">Titel</label>
      <input type="text" formControlName="category_name" name="category_name"
             class="form-control container-shadow text-field" id="category_name">
    </div>
    <div class="alert p-0"
         *ngIf="insertCategoryForm.get('category_name')?.hasError('required') && insertCategoryForm.get('category_name')?.touched">
      <span>Bitte einen Titel für die Kategorie eingeben!</span>
    </div>
    <div class="alert p-0"
         *ngIf="insertCategoryForm.get('category_name')?.hasError('maxlength') && insertCategoryForm.get('category_name')?.touched">
      <span>Max Länge: 30 Zeichen</span>
    </div>

    <div class="form-group select mt-3">
      <label for="parent_categoryID">Elternkategorie (optional):</label>
      <mat-form-field>
        <mat-select
          formControlName="parent_categoryID" name="parent_categoryID"
          class="form-control container-shadow" id="parent_categoryID"
          *ngIf="categories"
          ngxMatSelect
          [lazyLoad]="true"
          [searcher]="categorySearcher.bind(this)"
          [hasSearchBox]="true"
          [multiple]="false"
          [required]="false"
          [valueMember]="'CAID'"
          [displayMember]="'category_name'"
          [source]="categories | category"
          [emptyLabel]="'Keine Kategorien gefunden'"
          #sf="ngxMatSelect"
        >
          <mat-option [value]=""></mat-option>
          <mat-option [value]="c.CAID" *ngFor="let c of sf.filteredSource">
            {{c.category_name}}
          </mat-option>
        </mat-select>

      </mat-form-field>
    </div>

    <button [disabled]="!insertCategoryForm.valid" *ngIf="!this.edit" class="btn btn-success"
            (click)="onInsertCategorySubmit()">Kategorie erstellen
    </button>
    <button [disabled]="!insertCategoryForm.valid" *ngIf="this.edit" class="btn btn-success"
            (click)="onEditCategorySubmit()">Kategorie bearbeiten
    </button>
  </form>
</div>
</div>
