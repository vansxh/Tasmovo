<div class="d-flex justify-content-center">
<div class="col-md-6">
  <h1 *ngIf="!this.edit" class="text-center">Neuer Task</h1>
  <h1 *ngIf="this.edit" class="text-center">Task bearbeiten</h1>
  <form [formGroup]="insertTaskForm" class="form">

    <input type="hidden" formControlName="TAID" name="TAID">

    <div class="form-group">
      <label class="input-text" for="username">Benutzername oder E-Mail:</label>
      <input type="text" formControlName="username" placeholder="Username oder Mail" name="login"
             class="form-control container-shadow" id="username">
    </div>

    <div class="form-group">
      <label for="task_name">Titel</label>
      <mat-form-field appearance="standard" class="w-100 container-shadow">
        <input matInput placeholder="Neuer Taskname" formControlName="task_name" id="task_name">
      </mat-form-field>
    </div>

    <!--
    <div class="form-group">
      <label for="task_name">Titel</label>
      <input type="text" formControlName="task_name" placeholder="Neuer Taskname" name="task_name"
             class="form-control" id="task_name">
    </div>
    <div class="alert alert-danger"
         *ngIf="insertTaskForm.get('task_name')?.hasError('required') && insertTaskForm.get('task_name')?.touched">
      Bitte einen Titel für den Task eingeben!
    </div>
    <div class="alert alert-danger"
         *ngIf="insertTaskForm.get('task_name')?.hasError('maxlength') && insertTaskForm.get('task_name')?.touched">
      Max Länge: 30 Zeichen
    </div>-->

    <div class="row">

      <div class="col">
    <div class="form-group">
      <label for="deadline">Datum</label>
      <mat-form-field appearance="outline" class="w-100">
        <input matInput [matDatepicker]="picker" formControlName="deadlineDay" min="{{nowDate}}" id="deadline">
        <mat-hint>DD.MM.YYYY</mat-hint>
        <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
      </mat-form-field>
    </div>
      </div>

    <!--<div class="form-group">
      <label for="deadlineDay">Datum</label>
      <input type="date" formControlName="deadlineDay" placeholder="Datum auswählen" name="deadlineDay"
             class="form-control" id="deadlineDay" min="{{nowDate}}">
    </div>
    <div class="alert alert-danger"
         *ngIf="insertTaskForm.get('deadlineDay')?.hasError('required') && insertTaskForm.get('deadlineDay')?.touched">
      Bitte eine Deadline für den Task wählen!
    </div>-->
    <!--
    <div class="form-group">
      <mat-form-field appearance="fill" class="example-full-width">
          <mat-label>Uhrzeit</mat-label>
          <input formControlName="deadlineHour" placeholder="Uhrzeit auswählen" name="deadlineHour" matTimepicker>
      </mat-form-field>
    </div>-->

      <div class="col">
    <div class="form-group">
      <label for="time">Uhrzeit</label>
      <mat-form-field appearance="outline" class="w-100">
        <input matInput [format]="24" [ngxMatTimepicker]="timepicker" formControlName="deadlineHour" id="time" class="timepicker">
        <ngx-mat-timepicker-toggle matIconSuffix [for]="$any(timepicker)"></ngx-mat-timepicker-toggle>
        <ngx-mat-timepicker #timepicker></ngx-mat-timepicker>
      </mat-form-field>
    </div>
      </div>

    </div>

    <!--
    <div class="form-group">
      <label for="deadlineHour">Uhrzeit</label>
      <input type="time" formControlName="deadlineHour" placeholder="Uhrzeit auswählen" name="deadlineHour"
             class="form-control" id="deadlineHour">
    </div>
    <div class="alert alert-danger"
         *ngIf="insertTaskForm.get('deadlineHour')?.hasError('required') && insertTaskForm.get('deadlineHour')?.touched">
      Bitte eine Deadline für den Task wählen!
    </div>
    -->

    <div class="form-group">
      <label for="notes">Notizen (optional):</label>
      <mat-form-field appearance="outline" class="w-100">
        <input matInput placeholder="Notizen" formControlName="notes" id="notes">
      </mat-form-field>
    </div>

    <!--<div class="form-group">
      <label for="notes">Notizen (optional):</label>
      <input type="text" formControlName="notes" placeholder="Notizen" name="notes"
             class="form-control" id="notes">
    </div>-->

    <div class="form-group select">
      <label for="categoryID">Kategorie (optional):</label>
      <select formControlName="categoryID" name="categoryID"
             class="form-control container-shadow" id="categoryID" (ngModelChange)="onChangeCategory($event)">
        <option value="" disabled selected></option>
        <option *ngFor="let c of categories | category" value="{{c.CAID}}">{{c.category_name}}</option>
      </select>
      <div class="select_arrow"></div>
    </div>


    <div *ngIf="subcategories != undefined && subcategories.length > 0" class="form-group select">
      <label for="subcategoryID">Subkategorie (optional):</label>
      <select formControlName="subcategoryID" name="subcategoryID"
              class="form-control container-shadow" id="subcategoryID">
        <option value="" disabled selected></option>
        <option *ngFor="let c of subcategories" value="{{c.CAID}}">{{c.category_name}}</option>
      </select>
      <div class="select_arrow"></div>
    </div>

    <button [disabled]="!insertTaskForm.valid" *ngIf="!this.edit" class="btn btn-success"
            (click)="onInsertTaskSubmit()">Task erstellen
    </button>
    <button [disabled]="!insertTaskForm.valid" *ngIf="this.edit" class="btn btn-success" (click)="onEditTaskSubmit()">
      Task bearbeiten
    </button>
  </form>
</div>
</div>
